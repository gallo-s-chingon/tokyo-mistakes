<!DOCTYPE html>
<html lang="{{ site.Language.Lang }}" data-theme="{{ .Site.Params.colorScheme }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    {{- if .IsHome -}}
      {{ .Site.Title }}
    {{- else -}}
      {{ .Title }} | {{ .Site.Title }}
    {{- end -}}
  </title>
  
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta name="author" content="{{ .Site.Params.author }}">
  
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico">
  
  <!-- Styles -->
  {{ $styles := resources.Get "scss/main.scss" | toCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" integrity="{{ $styles.Data.Integrity }}">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Theme Script (prevents FOUC) -->
  <script>
    // Load saved theme or detect system preference
    const getTheme = () => {
      const saved = localStorage.getItem('theme');
      if (saved) return saved;
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    document.documentElement.setAttribute('data-theme', getTheme());
  </script>
</head>

<body>
  {{ partial "header.html" . }}
  
  <main id="main-content" class="main-content">
    {{ block "main" . }}{{ end }}
  </main>
  
  {{ partial "footer.html" . }}
  
  <!-- Scripts -->
  {{ $js := resources.Get "js/main.js" | minify | fingerprint }}
  <script src="{{ $js.Permalink }}" integrity="{{ $js.Data.Integrity }}"></script>
  
  {{ if .Site.Params.search.enabled }}
    {{ partial "search-script.html" . }}
  {{ end }}
</body>
</html>
