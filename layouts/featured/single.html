{{/* saved as single.html in tokyo-mistakes/layouts/featured */}}
{{ define "main" }}
<article class="post post--featured">
  {{ if .Params.post_image }}
  <div class="post-hero" style="background-image: url('{{ .Params.post_image }}');">
    <div class="post-hero-content">
      <h1 class="post-title">{{ .Title }}</h1>
      <div class="post-meta">
        <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "January 2, 2006" }}</time>
        {{ if .Params.podcast_name }}
        <span class="post-meta-divider">â€¢</span>
        <span class="post-meta-item">
          {{ if .Params.podcast_link }}
            <a href="{{ .Params.podcast_link }}" target="_blank" rel="noopener">{{ .Params.podcast_name }}</a>
          {{ else }}
            {{ .Params.podcast_name }}
          {{ end }}
        </span>
        {{ end }}
      </div>
    </div>
  </div>
  {{ end }}

  <div class="container">
    <div class="post-content">
      {{ if not .Params.post_image }}
        {{ partial "post-header.html" . }}
      {{ end }}

      <!-- Featured appearance details -->
      <div class="featured-details">
        {{ if .Params.podcast_name }}
        <div class="featured-podcast">
          <strong>Podcast:</strong> 
          {{ if .Params.podcast_link }}
            <a href="{{ .Params.podcast_link }}" target="_blank" rel="noopener">{{ .Params.podcast_name }}</a>
          {{ else }}
            {{ .Params.podcast_name }}
          {{ end }}
        </div>
        {{ end }}
        
        {{ if .Params.host_name }}
        <div class="featured-host">
          <strong>Host:</strong> {{ .Params.host_name }}
        </div>
        {{ end }}
        
        {{ if .Params.episode_url }}
        <div class="featured-link">
          <a
            href="{{ .Params.episode_url }}"
            class="btn btn-primary"
            target="_blank"
            rel="noopener"
          >
            <i class="fas fa-external-link-alt"></i>
            Listen to Episode
          </a>
        </div>
        {{ end }}
      </div>

      <!-- Spotify Player -->
      {{ if .Params.spotify }}
      <div class="spotify-player">
        <div class="embed-container embed-spotify">
          <iframe
            src="https://open.spotify.com/embed/episode/{{ .Params.spotify }}?theme={{ .Site.Params.colorScheme | default "auto" }}"
            title="{{ .Title }} - Spotify"
            width="100%"
            height="232"
            frameborder="0"
            allowtransparency="true"
            allow="encrypted-media"
            loading="lazy"
          ></iframe>
        </div>
      </div>
      {{ end }}

      <div class="post-body">{{ .Content }}</div>

      {{ partial "social-share.html" . }}
      {{ partial "comments.html" . }}
      {{ partial "related-posts.html" . }}
    </div>
  </div>
</article>
{{ end }}
