{{/* Add this to your head.html */}}
<script>
  // Apply theme from config
  (function() {
    const savedTheme = localStorage.getItem('theme');
    const configTheme = '{{ .Site.Params.colorScheme }}';
    
    // If colorful is set in config and no user preference saved
    if (configTheme === 'colorful' && !savedTheme) {
      document.documentElement.setAttribute('data-theme', 'colorful');
    } 
    // Otherwise use saved theme or system preference
    else if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
    } else if (configTheme === 'dark' || (configTheme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.setAttribute('data-theme', 'dark');
    } else {
      document.documentElement.setAttribute('data-theme', 'light');
    }
  })();
</script>
