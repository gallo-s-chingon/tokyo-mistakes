{{/* saved as category.html in tokyo-mistakes/layouts/categories */}}
{{ define "main" }}
<div class="taxonomy-page">
  <div class="container">
    <header class="taxonomy-header">
      <h1 class="taxonomy-title">Category: {{ .Title }}</h1>
      <p class="taxonomy-description">{{ .Description }}</p>
      
      <div class="taxonomy-meta">
        <span class="taxonomy-count">{{ len .Pages }} posts</span>
      </div>
    </header>

    <div class="post-grid">
      {{ range .Pages }}
      <div class="post-card">
        {{ $postImage := .Params.post_image | default .Params.image }}
        {{ if $postImage }}
        <div class="post-card-image" style="background-image: url('{{ $postImage }}');">
          <a href="{{ .Permalink }}" class="post-card-link" aria-label="{{ .Title }}"></a>
        </div>
        {{ end }}
        <div class="post-card-content">
          <h2 class="post-card-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h2>
          <div class="post-card-meta">
            <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
            <span class="post-card-type">{{ .Type | title }}</span>
          </div>
          {{ if .Summary }}
          <div class="post-card-excerpt">
            {{ .Summary | truncate 120 }}
          </div>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</div>
{{ end }}
