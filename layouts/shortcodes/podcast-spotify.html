{{- /*
  Spotify Podcast Player Shortcode

  Provide episode ID as parameter.

  Example: {{< podcast-spotify "4rOoJ6Egrf8K2IrywzwOMk" >}}

  To get episode ID from Spotify:
  1. Right-click episode → Share → Copy Episode Link
  2. Extract ID from URL: https://open.spotify.com/episode/[ID]
*/ -}}

{{- $episodeId := .Get 0 -}}
{{- $height := .Get "height" | default "232" -}}
{{- $playerWidth := .Site.Params.podcast.playerWidth | default 0.8 -}}
{{- $widthPercent := mul $playerWidth 100 -}}

{{- if $episodeId -}}
<div class="podcast-player podcast-player-spotify" style="width:{{ $widthPercent }}%;max-width:{{ $widthPercent }}%;margin:0 auto 50px auto;">
  <iframe
    style="border-radius:12px"
    src="https://open.spotify.com/embed/episode/{{ $episodeId }}?utm_source=generator"
    width="100%"
    height="{{ $height }}"
    frameBorder="0"
    allowfullscreen=""
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
    loading="lazy">
  </iframe>
</div>
{{- else -}}
  <p><strong>Error:</strong> Spotify episode ID required. Provide episode ID as parameter.
{{- end -}}
